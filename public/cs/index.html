<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Customer Service | Zidan Store</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Segoe UI',Arial,sans-serif;
  background:#f9fafb;
  height:100vh;
  display:flex;
  flex-direction:column;
}

/* HEADER */
.header{
  background:#dc2626;
  color:#fff;
  padding:16px;
  text-align:center;
}
.header h1{
  margin:0;
  font-size:22px;
}
.header p{
  margin-top:4px;
  font-size:13px;
  opacity:.9;
}

/* CHAT */
.chat-container{
  flex:1;
  max-width:900px;
  width:100%;
  margin:auto;
  display:flex;
  flex-direction:column;
  background:#fff;
}

.messages{
  flex:1;
  padding:20px;
  overflow-y:auto;
  background:#f3f4f6;
}

.msg{
  max-width:75%;
  padding:12px 14px;
  margin-bottom:12px;
  border-radius:14px;
  font-size:14px;
  line-height:1.4;
}
.user{
  background:#dc2626;
  color:#fff;
  margin-left:auto;
  border-bottom-right-radius:4px;
}
.ai{
  background:#e5e7eb;
  color:#111827;
  border-bottom-left-radius:4px;
}

/* INPUT AREA */
.input-area{
  border-top:1px solid #e5e7eb;
  padding:12px;
  background:#fff;
}

/* WA LINK */
.wa-link{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:14px;
  font-weight:600;
  color:#16a34a;
  text-decoration:none;
  margin-bottom:10px;
}
.wa-link img{
  width:22px;
}
.wa-link:hover{
  text-decoration:underline;
}

/* INPUT */
.input{
  display:flex;
}
.input input{
  flex:1;
  padding:14px;
  border:1px solid #e5e7eb;
  border-radius:12px 0 0 12px;
  outline:none;
}
.input button{
  background:#dc2626;
  color:#fff;
  border:none;
  padding:0 22px;
  border-radius:0 12px 12px 0;
  cursor:pointer;
}
.input button:hover{
  background:#b91c1c;
}

/* FOOTER */
.footer{
  text-align:center;
  font-size:12px;
  padding:10px;
  color:#6b7280;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <h1>Customer Service</h1>
  <p>Zidan Store â€¢ Layanan Bantuan Digital</p>
</div>

<!-- CHAT -->
<div class="chat-container">
  <div class="messages" id="messages">
    <div class="msg ai">
      Halo ðŸ‘‹<br>
      Selamat datang di Customer Service Zidan Store.<br>
      Silakan sampaikan kebutuhan Anda.
    </div>
  </div>

  <!-- INPUT -->
  <div class="input-area">

    <!-- WHATSAPP -->
    <a class="wa-link" href="https://wa.me/62895604537777" target="_blank">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg">
      Chat langsung via WhatsApp
    </a>

    <!-- AI INPUT -->
    <div class="input">
      <input id="text" placeholder="Tulis pesan untuk Customer Service AI..." onkeydown="if(event.key==='Enter') send()" />
      <button onclick="send()">Kirim</button>
    </div>

  </div>
</div>

<div class="footer">
  Â© 2025 Zidan Store
</div>

<script>
async function send(){
  const input = document.getElementById('text');
  const messages = document.getElementById('messages');
  const msg = input.value.trim();
  if(!msg) return;

  messages.innerHTML += `<div class="msg user">${msg}</div>`;
  input.value = '';
  messages.scrollTop = messages.scrollHeight;

  try{
    const res = await fetch('/api/chat',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({ message: msg })
    });

    const data = await res.json();
    messages.innerHTML += `<div class="msg ai">${data.reply}</div>`;
    messages.scrollTop = messages.scrollHeight;

  }catch(e){
    messages.innerHTML += `<div class="msg ai">CS sedang sibuk, silakan hubungi WhatsApp.</div>`;
  }
}
</script>

</body>
</html>
